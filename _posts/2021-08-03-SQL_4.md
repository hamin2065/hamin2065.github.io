---
layout: post
title: "[SQL 명령어] 데이터 정의어(DDL)"
subtitle:
categories: data
tags: sql
---

[부스트코스 기초 데이터 분석을 위한 핵심 SQL](https://www.boostcourse.org/ds102/joinLectures/114920)를 정리한 포스팅입니다.

# 데이터 정의어(DDL) - 테이블을 정의

데이터 정의어는 **테이블** 을 생성, 변경, 삭제할 때 사용하는 명령어이다.

# 테이블, 데이터 타입

테이블은 각 열마다 반드시 **1가지 데이터 타입** 으로 정의되어야 한다.
![sql_table](https://cphinf.pstatic.net/mooc/20210309_108/1615293978618hKsYw_PNG/_1.png)

위의 그림처럼 각 테이블은 하나의 데이터 타입으로만 저장되어야한다.

가입일자 테이블을 보면 날짜형 데이터로만 이루어져야하며 숫자형, 문자형등 다른 데이터 타입이 들어올 수 없다.

테이블에 들어갈 수 있는 데이터 타입을 간략하게 살펴보자.

![data_type](/assets/img/posts/data_type.png)

숫자형 데이터에는 `BIT, 정수, 소수`데이터형이 있다.

문자형 데이터는 길이를 미리 고정해두고 쓰는 `고정길이 문자형`이 있고, 저장될 때, 해당 길이만큼 저장되는 `가변길이 문자형`이 있다.

마지막으로 날짜형 데이터는 `년, 월, 일, 시, 분, 초`의 데이터가 있다.

DBA가 저장공간을 효율적으로 쓰기 위해서 바이트 수를 미리 정의한다.

# 테이블, 제약조건

테이블은 각 열마다 제약 조건을 정의할 수 있다.

![sql_table](https://cphinf.pstatic.net/mooc/20210309_108/1615293978618hKsYw_PNG/_1.png)

아까 봤던 회원테이블을 다시보면, 회원번호는 `PK(PRIMARY KEY)`라는 제약조건을 주고, 가입일자에는 `NOT NULL`이라는 제약조건을 줄 수 있다.

1. PK(PRIMARY KEY) : 중복되어 나타날 수 없는 단일 값. NOT NULL(\*NULL : 값이 없는 상태)
2. NOT NULL : NULL을 허용하지 않음

이러한 조건들을 회원테이블에 주게되면 회원테이블에서 회원번호는 값이 있어야하며, 중복되지 말아야하고, 가입일자 또한 값이 항상 존재해야한다.

# 데이터 정의어(DDL) 실습

먼저, 데이터베이스를 생성하고 사용하는 명령어를 써준다.

```sql
/* Practice 이름으로 데이터베이스 생성*/
CREATE DATABASE Practice;

/* Practice 데이터베이스 사용*/
USE Practice;
```

그리고 회원테이블을 생성해준다.

```sql
/***************테이블 생성(Create)***************/
/* 회원테이블 생성 */
CREATE TABLE 회원테이블 (
회원번호 INT PRIMARY KEY,
이름 VARCHAR(20),
가입일자 DATE NOT NULL,
수신동의 BIT
);
```

테이블을 생성할 때는 열 이름을 먼저 써주고, 그 뒤에 데이터 타입을 써준뒤 제약조건이 있는 경우에 제약조건을 써주면된다.

VARCHAR(20)이라는 뜻은 최대 20바이트 길이만큼 쓸 수 있다는 의미이다.

회원 테이블을 생성한 후에 회원테이블을 조회해본다.

```sql
/* 회원테이블 조회 */
SELECT  *  FROM  회원테이블;
```

여기서 `*`는 모든 것을 선택한다는 의미이다. 즉, 위의 명령어는 회원테이블 전부를 조회하겠다는 뜻이다.

테이블에 열을 추가할 때는 `ALTER TABLE`과 `ADD`를 써준다.

```sql
/***************테이블 열 추가*******************/
/* 성별 열 추가 */
ALTER TABLE 회원테이블 ADD 성별 VARCHAR(2);
```

위의 명령어를 입력하면 테이블 맨 오른쪽에 성별이라는 열이 추가된 것을 확인할 수 있다.

열의 데이터 타입을 변경할 때는 `MODIFY`를 써준다.

```sql
/***************테이블 열 데이터 타입 변경***************/
/* 성별 열 타입 변경 */
ALTER TABLE 회원테이블 MODIFY 성별 VARCHAR(20);
```

위의 명령어의 실행결과로 성별의 데이터 타입이 VARCHAR(2)에서 VARCHAR(20)으로 바뀐 것을 확인할 수 있다.

테이블의 열 이름을 바꾸고 싶을 때는 `CHANGE`를 써주면 된다.

```sql
/***************테이블 열 이름 변경**************/
/* 성별 -> 성 열 이름 변경 */
ALTER TABLE 회원테이블 CHANGE 성별 성 VARCHAR(2);
```

원래 테이블 열 이름 옆에 새롭게 바꿀 테이블 열 이름을 써주면 테이블 열의 이름이 성별에서 성으로 바뀐다.

테이블 이름을 바꾸려면 `RENAME` 을 써주면 된다.

```sql
/***************테이블명 변경**************/
/* 테이블명 변경 */
ALTER TABLE 회원테이블 RENAME 회원정보;
```

테이블의 이름이 회원테이블에서 회원정보로 바뀌게 된다.

테이블의 이름이 바뀐 후에 `SELECT * FROM 회원테이블;` 명령어를 입력하면 테이블 조회가 되지 않는다.

마지막으로 테이블을 삭제하는 명령어이다.

```sql
/***************테이블 삭제**************/
/* 테이블 삭제 */
DROP TABLE 회원정보;
```

`DROP TABLE`을 통해서 테이블을 삭제한 후에 조회해보면 조회가 되지 않는 것을 확인할 수 있다.
