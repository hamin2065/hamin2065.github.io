---
layout: post
title: Shell&Shell_Editors (Hufs Missing Semester)
color: rgb(242,85,44)
tags: [Shell, Shell Editors, CLI, WSL, vi]
---

 `Hufs Missing Semester` 강의 내용 정리

# Shell 컴퓨터 시스템 체계



기본적인 컴퓨터의 체계는 크게 하드웨어, 소프트웨어 두 가지로 나뉜다.

하드웨어 : 손으로 만질 수 있는 형태의 장치들_CPU 모니터 등
소프트웨어 : 컴퓨터 작동을 위해 이용되는 모든 프로그램과 기술들_
    
- 응용 S/W : 실행가능한 프로그램(game, msoffice, chrome..)
- 시스템 S/W : 사용자들이 응용 S/W를 실행시키려고 할때 이러한 사용자들의 지시를 하드웨어와 소통해서 실행시켜주는 프로그램들의 집합(OS, 즉 운영체제라고 부름)

운영체제가 컴퓨터에서 차지하는 공간
- 커널 공간 : 하드웨어와의 소통을 주관한다.
- 사용자 공간 : 사용자와 직접적으로 연결

    -> Shell은 사용자 공간과 커널 공간을 이어주는 것이다.
    사용자가 소프트웨어를 실행시키고 싶거나 하드웨어에 직접적인 명령을 내리고 싶을때 사용자 공간에서 커널 공간에 내리는 명령이 Shell에서 진행된다.

    -> Shell 명령어 : 사용자 공간에서 커널공간에 내리는 명령어

명령어를 입력하는 공간?
 - CLI : Command Line Interface
    (ex. Command prompt(까만창, 마우스를 사용하지 않는다.))
        
 - GUI : Graphical User Interface
        (ex. Window 바탕화면(마우스 사용 제어))
    -> 개발자나 서버를 관리하는 사람에게 많은 불편함을 준다.

# WSL 설치 및 사용

- 운영체제의 종류
    - Window 운영체제
    - Linux 운영체제
    - Mac OS 운영체제

## Windows에 WSL(Linux환경 설치)하는 방법

하나의 컴퓨터에는 하나의 운영체제가 설치되어 있는 것이 일반적이다.
WSL은 리눅스용 윈도우 하위시스템, 즉 윈도우 환경에서 리눅스를 사용하기 위해서 만들어진것이다.

### 1. Linux용 Windows 하위 시스템 사용

`Powershell`을 관리자 권한으로 실행 후 `dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart`을 입력

### 2. WSL 2 실행을 위한 요구 사항 확인
`systeminfo`를 입력후 버전과 빌드가 부합하는지 확인
 - x64 시스템의 경우 : 버전 1903 이상, 빌드 18362 이상
 - ARM64 시스템의 경우: 버전 2004 이상, 빌드 19041 이상
 - 18362보다 낮은 빌드는 WSL 2를 지원하지 않는다. Windows Update Assistant(https://www.microsoft.com/ko-kr/software-download/windows10)를 사용하여 Windows 버전을 업데이트해야한다.

### 3. Virtual Machine 기능 사용
`PowerShell`에 `dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart`를 입력한다.

### 4. Linux 커널 업데이트 패키지 다운로드

- `systeminfo | find "System Type"`을 입력한 후에 사용하고 있는 머신의 종류를 파악한다. (이때, 아무것도 뜨지 않는 경우 `systeminfo | find "시스템 종류"`를 입력한다.) 
     - x64 머신용 최신 WSL2 Linux 커널 업데이터 패키지
    (https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)
     - ARM64 머신을 사용하는 경우 (https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_arm64.msi)
- 다운로드한 업데이트 패키지를 실행한다. (이때, 패키지가 제대로 실행되지 않는다면 윈도우를 최신 버전으로 업데이트 한 후에 실행하면 된다.)

### 5. WSL 2를 기본 버전으로 설정

- PowerShell을 열고 `wsl --set-default-version 2`의 명령을 실행하여 WSL2를 기본 버전으로 설정한다.


### 6. 선택한 Linux 배포 설치

 https://aka.ms/wslstore 에 들어가서 `Ubuntu`를 설치한다.

### 7. 아이디와 비밀번호 설정

`Ubuntu`가 설치 완료되면 열어서 아이디와 비밀번호를 설정해준다.




 

참고 : https://docs.microsoft.com/ko-kr/windows/wsl/install-win10 

- - -

## WSL2를 이용한 Linux 운영체제 CLI 명령어 간단 실습
 - `pwd`(Print Working Directory) : 현재 작업중인 디렉토리 출력
 - `cd`(Change Directory) : 디렉토리(경로) 이동
    - 하위 디렉토리로 이동하고 싶은 경우 : `cd + (디렉토리)` 입력
    - 상위 디렉토리로 이동하고 싶은 경우 `cd ..`입력 
 - `ls`(List) : 디렉토리 목록 확인
 - `cp`(Copy) : 파일 또는 디렉터리 복사
    - 같은 디렉토리로 복사하는 경우 : `cp + (복사할 파일) + ( 타겟파일 : 같은 디렉토리인 경우 다른 이름으로 저장해주어야 한다.)`(ex. `cp text.txt test1.txt)
    - 다른 디렉토리로 복사하는 경우 : `cp + (복사할 파일) + (다른 디렉토리의 경로)` (ex. `cp test.txt /mnt/d`)

 - `(명령어) --help` : 커맨드 명령어를 모르는 경우에 명령어에 대한 정보를 알려준다.

- `mv`(Move) : 파일 혹은 디렉터리의 이동
- `mkdir`(Make Directory) : 디렉토리의 생성
- `rm`(Remove) : 파일이나 디렉토리를 삭제
    - 디렉토리를 삭제하는 경우 : `rm -d (디렉토리 이름)`
- `cat`(Concatenate) : 1. 단순 파일 내용 출력 2. 파일의 조작
    - `cat > (파일 이름)`입력 후 파일에 저장할 내용을 입력한다. 그리고 `ctrl+d`를 누른후 `cat (파일 이름)`을 실행해보면 파일에 저장한 내용이 출력된다.
- `man + (명령어)` : 다양한 명령어의 도움말 확인

    ex) `man ls` -> `ls`의 명령어에 대한 도움말 확인 가능

- `find` 명령어 : 특정 파일이나 특정 문자열을 가지고 있는 문자열을 찾는다.
    - `find` : 현재 디렉토리 파일 및 디렉토리 출력
    - `find -print0` : 현재 디렉토리의 모든 내용을 줄바꿈없이 출력
    - `find [PATH]` : PATH에 있는 파일 및 디렉토리 리스트 표시
- 파이프라인(`|`) : 앞 명령어 수행의 결과를 받아 다음 명령어 수행

    - 명령어1|명령어2 : 명령어1의 처리결과를 명령어2로 전달하는 것 -> 여러개의 명령을 시행하고 싶을때 그것을 한 줄로 표현하는 것을 가능하게함
    - ex. `ls -al|grep "^d"` : ls -al 즉 모든 파일 중 d로 시작하는 라인만 출력하라는 뜻

- Grep 명령어 : 입력으로 전달된 파일 내 특정 문자열 찾아 출력


## PowerShell을 이용한 window CLI 명령어 간단 실습
-> PowerShell의 세 가지 주요 Cmdlet(PowerShell에서 이용하는 동사-명사 형태의 명령어)

- Get-Command : 현재 컴퓨터에 사용 가능한 명령어를 검색하고 싶을 때
- Get-Help : 명령어를 어떻게 사용해야 하는지 알아볼 때 (-detailed) 명령을 통해 옵션 확인도 가능
- Get-Member : 개체 유형의 정식 이름과 멤버의 목록을 보고싶을 때
    
    (ex. `get-command|get-memeber` : get-command의 목록중에 개체들만 정리해서 보여준다.)

> - Alias란?
> 명령어를 간소화하여 다른 이름으로 사용할 수 있도록 해주는 쉘내부 명령어
> 즉, 복잡한 명령어나 여러 옵션을 사용하는 명령어를 간단한 이름으로 사용할 수 있도록 명령어이다.
>
> alias 기능을 이용하면 어떤 명령이든지, 명령의 길이가 얼마이든지 상관없이 내가 사용하기 편한 형태로 바꾸어서 사용할 수 있는 것이다.
>
> `alias (별명) = "명령어정의"`
>        
>
> 그러나 이 방법은 시스템을 재부팅하고나면 다시 초기화되므로 매번 적용해야되는 불편함이 생긴다. 따라서 보통은 홈디렉토리에 있는 `.bashrc` 또는 `.bash_aliases` 파일에 등록을 해서 사용한다.

- - -

# vi를 사용한 문서편집

## 1. 리눅스 상에서의 문서 편집기의 종류 및 특징
 - `vi`이용-> 마우스를 이용하지 않는다. 터미널 환경에서 키보드로만 명령어를 치는 방식
  - `gedit` : GUI 환경에서 문서 작용

## 2. vi 기본적인 사용 방법
 3가지 모드
  - 마지막 행 모드(저장 및 종료)
  - 명령 모드 (커서 이동이 가능하다. 줄, 글자 삭제, 복사)
  - 입력 모드(문자의 입력)

> - vi를 시작 : 명령모드로 들어가게됨
> - 명령모드 -> 입력 모드 : `'i',a'`
> - 입력 모드 -> 명령 모드 : `ESC`
> - 명령 모드 -> 마지막 행 모드 : `:`
> - 마지막 행 모드 -> vi 종료 : `q` `q!` `wq`

>- 명령 모드 입력 가능 명령
>    1. `zz` : 작업한 내용을 저장하고 vi를 종료한다.
>    2. `¡` : 현재 커서 자리에 입력한다.(입력 모드로 전환)
>    3. `a` : 현재 커서 다음 자리에 입력한다.(입력 모드로 전환)
>    4. `:` : 마지막 행 모드로 전환한다.
>
>- 입력 모드 입력 가능 명령
>    1. `ESC` : 명령 모드로 이동할 수 있다.
>
>- 마지막 행 모드 입력 가능 명령
>
>    `:` : 전환되는 모드이며 저장과 종료가 가능하다.
>
>    1. `q` : 작업한 것이 없을 시 종료한다.
>    2. `q!` : 작업한 내용을 저장하지 않고 종료한다.
>    3. `w(파일명)` : 현재 작업한 내용을 저장만 한다. 파일명 입력 시 다른 이름으로 저장한다.
>    4. `wq` : 작업한 내용을 저장하고 종료한다.
>    5. `wq!` : 작업한 내용을 저장한 뒤 강제로 종료한다.

## 3. vi의 추가기능
- 커서 이동하기
 : GUI 환경에서는 마우스나 화살표키로 커서를 바꿀 수 있다면 vi에서는 `h(←), l(→), k(↑), j(↓)`로 변경할 수 있다.


- 명령 취소하기
 : 삭제나 수정을 잘못할 경우 `u`를 눌러 명령을 취소할 수 있다.

- 페이지 맨 위/아래로 커서 옮기기
 : page up/page down 키 이용

- 복사, 붙여넣기 자르기
 - `yy` : 커서가 위치한 행(가로줄)을 복사한다.
            명령 앞에 숫자를 입력 시 입력 숫자만큼의 행을 복사한다.(ex. 3yy)
 - `dd` : 커서가 위치한 행(가로줄)을 잘라낸다. 명령 앞에 숫자를 입력 시 입력 숫자만큼의 행을 잘라낸다.(ex. 3dd)
 - `p` : 커서가 위치한 행의 아래쪽에 붙여넣는다.

- 문자열 검색하기
 - `/(문자열)` : 아래방향으로 문자열 찾기
 - `?(문자열)` : 윗 방향으로 문자열 찾기
 - `n` : 기존 가던 방향으로 계속 문자열을 찾을 경우
 - `N` : 반대 방향으로 문자열을 찾을 경우